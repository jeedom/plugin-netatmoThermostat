<div class="eqLogic-widget eqLogic" style="background-color: #background_color#; #style#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="mobile" >
    <div title="#collectDate#" >

        <span class="statusCmd" style="position : absolute;left : 5px; width : 30px;z-index: 1030;"></span>
        <i class='fa fa-refresh pull-right cursor refresh' style="margin-top: 3px;margin-right: 3px;"></i>
        <center><strong>#name#</strong></center>
        <center>
            <span style="font-size : 1.2em; font-weight: bold;">#temperature# °C / #humidity# %</span>
        </center>

        <span class="cmd cmd-widget" data-cmd_id="#smart_off_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#smart_on_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#presence_off_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#presence_on_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#ambient_off_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#ambient_on_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#standby_off_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#standby_on_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#automatic_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#manuel_id#" style="display:none;"></span>
        <span class="cmd cmd-widget" data-cmd_id="#refresh_id#" style="display:none;"></span>
        <center>
            <i class="fa fa-home ambiant cursor" style="font-size: 1.5em;margin-left: 2px;color:#3498db"></i>
            <i class="fa fa-cogs smart cursor" style="font-size: 1.5em;margin-left: 5px;color:#3498db"></i>
            <i class="icon jeedom-mouvement presence cursor" style="font-size: 1.5em;margin-left: 5px;color:#3498db"></i>
            <i class="fa fa-paw state cursor" style="font-size: 1.5em;margin-left: 5px;color:#3498db"></i>
        </center>
        <br/>
        <center>
            <span class="current" style="font-size: 2em;margin-left: 5px;"></span>
            <span style="position: relative;top: -5px;left: 5px;"><span class="mode"></span></span>
        </center>
        <script>
            $('.eqLogic[data-eqLogic_uid=#uid#] .refresh').on('click', function () {
                jeedom.cmd.execute({id: '#refresh_id#'});
            });

            if ('#relay#' == '1') {
                if ('#mode#' == '2') {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .current').append('<i class="icon jeedom-feu"></i>');
                } else {
                    $('.eqLogic[data-eqLogic_uid=#uid#] .current').append('<i class="icon nature-snowflake"></i>');
                }
            } else {
                $('.eqLogic[data-eqLogic_uid=#uid#] .current').append('<i class="fa fa-times"></i>');
            }
            if ('#state#' == '1') {
                $('.eqLogic[data-eqLogic_uid=#uid#] .state').css('color', 'white');
                $('.eqLogic[data-eqLogic_uid=#uid#] .state').on('click', function () {
                    jeedom.cmd.execute({id: '#automatic_id#'});
                });
            } else {
                $('.eqLogic[data-eqLogic_uid=#uid#] .state').on('click', function () {
                    jeedom.cmd.execute({id: '#manuel_id#'});
                });
            }
            if ('#smart#' == '1') {
                $('.eqLogic[data-eqLogic_uid=#uid#] .smart').css('color', 'white');
                $('.eqLogic[data-eqLogic_uid=#uid#] .smart').on('click', function () {
                    jeedom.cmd.execute({id: '#smart_off_id#'});
                });
            } else {
                $('.eqLogic[data-eqLogic_uid=#uid#] .smart').on('click', function () {
                    jeedom.cmd.execute({id: '#smart_on_id#'});
                });
            }
            if ('#presence#' == '1') {
                $('.eqLogic[data-eqLogic_uid=#uid#] .presence').css('color', 'white');
                $('.eqLogic[data-eqLogic_uid=#uid#] .presence').on('click', function () {
                    jeedom.cmd.execute({id: '#presence_off_id#'});
                });
            } else {
                $('.eqLogic[data-eqLogic_uid=#uid#] .presence').on('click', function () {
                    jeedom.cmd.execute({id: '#presence_on_id#'});
                });
            }
            if ('#ambient#' == '1') {
                $('.eqLogic[data-eqLogic_uid=#uid#] .ambiant').css('color', 'white');
                $('.eqLogic[data-eqLogic_uid=#uid#] .ambiant').on('click', function () {
                    jeedom.cmd.execute({id: '#ambient_off_id#'});
                });
            } else {
                $('.eqLogic[data-eqLogic_uid=#uid#] .ambiant').on('click', function () {
                    jeedom.cmd.execute({id: '#ambient_on_id#'});
                });
            }

            switch ('#controlRelay#') {
                case '0' :
                    $('.eqLogic[data-eqLogic_uid=#uid#] .mode').append('Manuel');
                    break;
                case '1' :
                    $('.eqLogic[data-eqLogic_uid=#uid#] .mode').append('Sécurité');
                    break;
                case '2' :
                    $('.eqLogic[data-eqLogic_uid=#uid#] .mode').append('Vacances');
                    break;
                case '3' :
                    $('.eqLogic[data-eqLogic_uid=#uid#] .mode').append('Sécurité');
                    break;
                case '4' :
                    $('.eqLogic[data-eqLogic_uid=#uid#] .mode').append('Présence');
                    break;
                case '5' :
                    $('.eqLogic[data-eqLogic_uid=#uid#] .mode').append('Ambiance');
                    break;
                case '6' :
                    $('.eqLogic[data-eqLogic_uid=#uid#] .mode').append('Calendrier');
                    break;
            }
        </script>
        <center>
            <div class="cmd cmd-widget" data-type="action" data-subtype="slider" data-thermostat_id="#thermostat_cmd_id#" style="width : 100px;height : 100px;display : block;">
                <div style="margin-top : 5px;">
                    <input type="text" class="dial" data-role="none" value="#order#" data-min="#thermostat_minValue#" data-max="#thermostat_maxValue#" data-width="100" data-height="100" />
                </div>
                <script>
                    $.include(['plugins/greenmomit/core/template/mobile/jquery.kontrol.js'], function () {
                        $(".eqLogic[data-eqLogic_uid=#uid#] .cmd[data-thermostat_id=#thermostat_cmd_id#] .dial").dial({
                            bgColor: "#3498db",
                            fgColor: '#FFFFFF',
                            noScroll: true,
                            change: function (v) {
                                jeedom.cmd.execute({id: '#thermostat_cmd_id#', value: {slider: v}});
                            },
                        });
                    });
                </script>
            </div>
        </center>
    </div>
</div>

